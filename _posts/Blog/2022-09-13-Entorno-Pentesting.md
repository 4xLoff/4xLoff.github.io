---
layout:   post
title:    "Entorno Pentesting y Hacking"
subtitle: "Intalacion y personalizacíon"
category:  Blog
tags:      [Linux, Github, Curiosidades, Portafolio, Cheet-Sheet]
---
![list](/assets/img/entorno/Kali-2022-09-12-23-42-00.png){:.lead width="800" height="100" loading="lazy"}

***

Configuración personal de Bspwm + Polyvar + Kitty con botones de Spotify, que se puede 

instalar en cualquier distribucion linux pensada para Pentesting, Hacking Etico,CTF's,etc.

Esto dependera de instalador de paquetes de cada distribucion.
{:.note title="Attention"}

Suerte!

[Hydejack]: https://hydejack.com
[jekyll]: http://jekyllthemes.org/

***
<!--more-->

1. this ordered seed list will be replaced by the toc
{:toc}

***

## Instalamos los siguientes paquetes.

```bash
apt install build-essential git vim xcb libxcb-util0-dev libxcb-ewmh-dev libxcb-randr0-dev libxcb-icccm4-dev libxcb-keysyms1-dev libxcb-xinerama0-dev libasound2-dev
libxcb-xtest0-dev libxcb-shape0-dev
```

## istalamos el terminal Kitty.

```bash
sudo apt install kitty -y
```

## Instalamos bspwm y sxhkd.

```bash
cd /home/axel/Descargas/
git clone https://github.com/baskerville/bspwm.git
git clone https://github.com/baskerville/sxhkd.git
cd bspwm/
make
sudo make install
cd ../sxhkd/
make
sudo make install
```
Hay que cambiar mi usuario es decir `axel` por el usuario que corresponda a tu ruta.
{:.note title="Attention"}
### Instalamos bspwm.

```bash
sudo apt install bspwm
```

## Cargamos en bspwm y sxhkd ficheros de ejemplo.

```bash
mkdir ~/.config/bspwm
mkdir ~/.config/sxhkd
cd /home/axel/Descargas/bspwm/
cp examples/bspwmrc ~/.config/bspwm/
chmod +x ~/.config/bspwm/bspwmrc 
cp examples/sxhkdrc ~/.config/sxhkd/
```
Hay que cambiar mi usuario es decir `axel` por el usuario que corresponda a tu ruta.
{:.note title="Attention"}

### Abrimos el bspwnrc y lo remmplazamos con este script en la ruta `~/.config/bspwn/`.

```default
#! /bin/sh

pgrep -x sxhkd > /dev/null || sxhkd &

bspc monitor -d I II III IV V VI VII VIII IX X

bspc config border_width         2
bspc config window_gap          12
bspc config split_ratio          0.52
bspc config borderless_monocle   true
bspc config gapless_monocle      true
bspc rule -a Caja state=floating follow=on
bspc rule -a Gimp desktop='^8' state=floating follow=on
bspc rule -a Chromium desktop='^2'
bspc rule -a mplayer2 state=floating
bspc rule -a Kupfer.py focus=on
bspc rule -a Screenkey manage=off
feh --bg-fill /home/axel/Images/1222108.png
~/.config/polybar/./launch.sh
bspc config focus_follows_pointer true
picom --experimental-backends &
bspc config border_width 0
xsetroot -cursor_name left_ptr &
```
Hay que cambiar mi usuario es decir `axel` por el usuario que corresponda a tu ruta.
{:.note title="Attention"}

### Abrimos el sxhkdrc y lo remmplazamos con este script en la ruta `~/.config/sxhkd`..

```default
# ------------------------------------------------------------------------------------------------
#
# wm independent hotkeys
#
 
# terminal emulator
super + Return
    kitty
 
# program launcher
super + d
    rofi -show run
 
# make sxhkd reload its configuration files:
super + Escape
    pkill -USR1 -x sxhkd
 
#
# bspwm hotkeys
#
 
# quit/restart bspwm
super + alt + {q,r}
    bspc {quit,wm -r}
 
# close and kill
super + {_,shift + }w
    bspc node -{c,k}
 
# alternate between the tiled and monocle layout
super + m
    bspc desktop -l next
 
# send the newest marked node to the newest preselected node
super + y
    bspc node newest.marked.local -n newest.!automatic.local
 
# swap the current node and the biggest node
super + g
    bspc node -s biggest
 
#
# state/flags
#
 
# set the window state
super + {t,shift + t,s,f}
    bspc node -t {tiled,pseudo_tiled,floating,fullscreen}
 
# set the node flags
super + ctrl + {m,x,y,z}
    bspc node -g {marked,locked,sticky,private}
 
#
# focus/swap
#
 
super + {_,shift + }{Left,Down,Up,Right}
       bspc node -{f,s} {west,south,north,east}
 
 
# focus the node for the given path jump
super + {p,b,comma,period}
    bspc node -f @{parent,brother,first,second}
 
# focus the next/previous node in the current desktop
super + {_,shift + }c
    bspc node -f {next,prev}.local
 
# focus the next/previous desktop in the current monitor
super + bracket{left,right}
    bspc desktop -f {prev,next}.local
 
# focus the last node/desktop
super + {grave,Tab}
    bspc {node,desktop} -f last
 
# focus the older or newer node in the focus history
super + {o,i}
    bspc wm -h off; \
    bspc node {older,newer} -f; \
    bspc wm -h on
 
# focus or send to the given desktop
super + {_,shift + }{1-9,0}
    bspc {desktop -f,node -d} '^{1-9,10}'
 
#
# preselect
#
 
# preselect the direction
super + ctrl + alt + {Left,Down,Up,Right}
    bspc node -p {west,south,north,east}
 
 
# preselect the ratio
super + ctrl + {1-9}
    bspc node -o 0.{1-9}
 
# cancel the preselection for the focused node
super + ctrl + space
    bspc node -p cancel
 
# cancel the preselection for the focused desktop
super + ctrl + alt + space
    bspc query -N -d | xargs -I id -n 1 bspc node id -p cancel
 
#
# move/resize
#
 
# expand a window by moving one of its side outward
#super + alt + {h,j,k,l}
#   bspc node -z {left -20 0,bottom 0 20,top 0 -20,right 20 0}
 
# contract a window by moving one of its side inward
#super + alt + shift + {h,j,k,l}
#   bspc node -z {right -20 0,top 0 20,bottom 0 -20,left 20 0}
 
# move a floating window
super + ctrl + {Left,Down,Up,Right}
    bspc node -v {-20 0,0 20,0 -20,20 0}
 
# Custom move/resize
alt + super + {Left,Down,Up,Right}
    /home/axel/.config/bspwm/scripts/bspwm_resize {west,south,north,east}

# Open firefox
super + shift + f
    /usr/bin/firefox

# Slimlock
super + shift + x
   # slimlock

# ------------------------------------------------------------------------------------------------
```
Hay que cambiar en `Custom move/resize` mi usuario es decir `axel` por el usuario que corresponda a tu ruta.
{:.note title="Attention"}

## Creamos el archivo bspwm_resize.

```default
mkdir ~/.config/bspwm/scripts/
touch ~/.config/bspwm/scripts/bspwm_resize; chmod +x ~/.config/bspwm/scripts/bspwm_resize
```

Mediante la siguiente configuración podremos en el futuro controlar las dimensiones 

de las vetanas así como modificarlas con atajos de teclado.

### Abrimos el bspwn_resize y lo remmplazamos con este script en la ruta `~/.config/bspwn/scripts/`.

```default
#!/usr/bin/env bash

if bspc query -N -n focused.floating > /dev/null; then
	step=20
else
	step=100
fi

case "$1" in
	west) dir=right; falldir=left; x="-$step"; y=0;;
	east) dir=right; falldir=left; x="$step"; y=0;;
	north) dir=top; falldir=bottom; x=0; y="-$step";;
	south) dir=top; falldir=bottom; x=0; y="$step";;
esac

bspc node -z "$dir" "$x" "$y" || bspc node -z "$falldir" "$x" "$y"
```

## Procedemos a instalar la paqueteria nesesaria para la polybar.

```default
sudo apt install cmake cmake-data pkg-config python3-sphinx libcairo2-dev libxcb1-dev libxcb-util0-dev libxcb-randr0-dev libxcb-composite0-dev python3-xcbgen xcb-proto libxcb-image0-dev libxcb-ewmh-dev libxcb-icccm4-dev libxcb-xkb-dev libxcb-xrm-dev libxcb-cursor-dev libasound2-dev libpulse-dev libjsoncpp-dev libmpdclient-dev libuv1-dev libnl-genl-3-dev
```

### Para instalar la polybar hacemos lo siguiente.

```defaul
cd /home/s4vitar/Descargas/
git clone --recursive https://github.com/polybar/polybar
cd polybar/
mkdir build
cd build/
cmake ..
make -j$(nproc)
sudo make install
```

## Procedemos con la instalación de Picom para ajustar las transparencias (Compton ya está deprecated).

Primeramente, instalamos los siguientes paquetes, no sin antes actualizar el sistema:

```default
sudo apt update
sudo apt install meson libxext-dev libxcb1-dev libxcb-damage0-dev libxcb-xfixes0-dev libxcb-shape0-dev libxcb-render-util0-dev libxcb-render0-dev libxcb-randr0-dev libxcb-composite0-dev libxcb-image0-dev libxcb-present-dev libxcb-xinerama0-dev libpixman-1-dev libdbus-1-dev libconfig-dev libgl1-mesa-dev libpcre2-dev libevdev-dev uthash-dev libev-dev libx11-xcb-dev libxcb-glx0-dev
```

Posteriormente, ejecutamos los siguientes comandos bajo el directorio ~/Descargas:

```default
git clone https://github.com/ibhagwan/picom.git
cd picom/
git submodule update --init --recursive
meson --buildtype=release . build
ninja -C build
sudo ninja -C build install
```
### Remplazamos el siguiente script en el archivo `picom.conf`en la ruta `~/.config/picom/`..

```default
#################################
#             Shadows           #
#################################

shadow = false;

shadow-radius = 7;

shadow-offset-x = -7;

shadow-exclude = [
  "name = 'Notification'",
  "class_g = 'Conky'",
  "class_g ?= 'Notify-osd'",
  "class_g = 'Cairo-clock'",
  "_GTK_FRAME_EXTENTS@:c"
];

#################################
#           Fading              #
#################################

fading = true

fade-in-step = 0.03;

fade-out-step = 0.03;

inactive-opacity = 0.8;

frame-opacity = 0.5;

inactive-opacity-override = false;

active-opacity = 1.0;

focus-exclude = [ "class_g = 'Cairo-clock'" ];

#################################
#       General Settings        #
#################################

backend = "xrender";

vsync = true

mark-wmwin-focused = true;

mark-ovredir-focused = false;

detect-rounded-corners = true;

detect-client-opacity = true;

refresh-rate = 0

detect-transient = true

detect-client-leader = true

use-damage = true

wintypes:
{
  tooltip = { fade = true; shadow = true; opacity = 0.75; focus = true; full-shadow = false; };
  dock = { shadow = false; }
  dnd = { shadow = false; }
  popup_menu = { opacity = 0.8; }
  dropdown_menu = { opacity = 0.8; }
};

corner-radius = 15.0;
rounded-corners-exclude = [
  #"window_type = 'normal'",
  #"class_g = 'rofi'",
  #"class_g = 'XTerm'",
  "class_g = 'Polybar'",
  #"class_g = 'code-oss'",
  #"class_g = 'TelegramDesktop'",
  "class_g = 'firefox'"
  #"class_g = 'Thunderbird'"
];

opacity-rule = [
	"100:class_g = 'Rofi'",
	"100:class_g = 'Spotify'",
	"100:class_g = 'Firefox'",
	"100:class_g = 'burp-StartBurp'"
];

```

## Instalamos rofi (Posteriormente instalaremos el tema Nord para Rofi):

```default
sudo apt install rofi -y
```

### Insertamos este script con el nombre de `nord.rasi` en ala ruta `~/.config/rofi/themes`.

```default
configuration {
  show-icons: true;
  font: "SauceCodePro Nerd Font Medium 10";
  drun-display-format: "{icon} {name}";
  display-run: " ";
  display-drun: " ";
  display-window: " ";
  modi: "window,run,drun";
}

* {
  background-color: #2E3440;
  bg-alt: #3B4252;
  fg: #ECEFF4;

  nord-blue-light: #88C0D0;
  nord-yellow: #A8D7FE;

  border: 0;
  lines: 12;
  padding: 0;
  margin: 0;
  spacing: 0;
}

window {
  width: 30%;
  transparency: "real";
}

mainbox {
  children: [inputbar, listview];
}

listview {
  columns: 1;
}

element {
  padding: 12;
  orientation: vertical;
  text-color: @fg;
}

element selected {
  background-color: @bg-alt;
  text-color: @nord-blue-light;
}

inputbar {
  background-color: @background;
  children: [prompt, entry];
}

prompt {
  enabled: true;
  font: "SauceCodePro Nerd Font 12";
  padding: 12 0 0 12;
  text-color: @nord-yellow;
}

entry {
  padding: 12;
  text-color: @nord-yellow;
}
```

Posteriormente con `rofi-theme-selector` seleccionamos el tema Nord.

### En este punto, reiniciamos el equipo y seleccionamos bspwm (Probamos que los shortcuts estén funcionando correctamente).

```default
super + alt + q
```
la tecla `super` es la tecla de windows.
{:.note}

## Configuramos un poco la terminal e instalamos las Hack Nerd Fonts.

EN esta parde debemos esconder la barra superior de la kitty y la barra lateral.

Las fuentes de Hack Nerd Fonts deben ir descomprimidas en `/usr/local/share/fonts/`, una vez hecho hay que ejecutar el comando.

```default
fc-cache -v
```

## Instalamos Google chome  o Firefox.

O cualquier buscador de su eleccion.

```default
sudo dpkg -i “nombre del paquete .deb”
```

## Instalamos el addon 'FoxyProxy' para Firefox o Google.

Lo buscamos tal cual foxy proxy extencion.

### Configuramos la privacidad en Firefox y el directorio de descargas principal.

En ajuates para que mo se guarde ninguna cookie ni historial de busqueda incluso el colo del tema eso ya es a su gusto.

## Instalamos 'feh' con 'apt install feh' para poder cargar fondos de pantalla.

```default
sudo apt install feh -y
```
### Cargamos en el archivo bspwmrc justo al final la siguiente línea:

```default
feh --bg-fill /home/axel/Desktop/fondo.jpg
```
{:.note title="Attention"}
Aki debe poner la ruta de su wallpaper justo despues de `feh --bg-fill` esto esta en bspwnrc.

## Para configurar nuestra Polybar, clonaremos primeramente en 'Descargas' el siguiente repositorio:
```default
git clone https://github.com/VaughnValle/blue-sky.git
```

Posteriormente, ejecutaremos los siguientes comandos:

```default
mkdir ~/.config/polybar
cd ~/Descargas/blue-sky/polybar/
cp * -r ~/.config/polybar
echo '~/.config/polybar/./launch.sh' >> ~/.config/bspwm/bspwmrc 
cd fonts
sudo cp * /usr/share/fonts/truetype/
fc-cache -v
```

Hacemos Windows + Shift + R para cargar la configuración y deberíamos ver la Polybar por arriba.

## Reemplazaremos todos loas archivos de la polybar por los siguientes scripts con los mismo nombres.

Cabe recalcar que esta es mi configuaracion pero si quereis cambiarla su gusto puede hacerlo con total confianza

no es nada dificil agregar o quitar modulos ,botones o funciones es algo que podebos investigar en ionternet.

### El siguiente script es `launch.sh` lo remplazamos con el del mismo nombre en la ruta `~/.config/polyvar/`.

```
#!/usr/bin/env sh

# Terminar las instancias de barra que ya se están ejecutando
killall -q polybar

# Espere hasta que los procesos se hayan cerrado.
while pgrep -u $UID -x polybar >/dev/null; do sleep 1; done

# Barra superior
polybar apagado -c ~/.config/polybar/current.ini &
polybar parrot -c ~/.config/polybar/current.ini &
polybar hackthebox -c ~/.config/polybar/current.ini &
polybar objetivo -c ~/.config/polybar/current.ini &
polybar escritorios -c ~/.config/polybar/current.ini &

# Barra inferior
polybar icono -c ~/.config/polybar/current.ini &
polybar hora -c ~/.config/polybar/current.ini &
polybar procesador -c ~/.config/polybar/current.ini &
polybar memoria -c ~/.config/polybar/current.ini &
polybar spotify -c ~/.config/polybar/current.ini &
polybar controlspotify -c ~/.config/polybar/current.ini &
polybar volumen -c ~/.config/polybar/current.ini &
```

### El siguiente script es `current.ini` lo remplazamos con el del mismo nombre en la ruta `~/.config/polyvar/`.

```
[global/wm]
margin-bottom = 0
margin-top = 0
include-file = ~/.config/polybar/colors.ini

[bar/main]
bottom = true
fixed-center = true
width = 17%
height = 60
offset-x = 20
offset-y = 20
background = "#A6000000"
foreground = ${color.fg}
background-0 = {color.bg}
radius-top = 10.0
radius-bottom = 10.0
line-size = 2
line-color = ${color.ac}
border-bottom-size = 0
border-color = ${color.ac}
padding = 2
module-margin-left = 1
module-margin-right = 1
font-0 = "Iosevka Nerd Font:size=13;3"
font-1 = "Iosevka Nerd Font:bold:size=24;2"
font-2 = "Iosevka Nerd Font:size=22;6"
font-3 = "Source Code Pro:size=10;3"
font-5 = "Helvetica Rounded:style=Bold:size=10.5;3"
font-4 = "Montserrat Medium:style=Medium:size=12;3"
font-6 = "Hurmit Nerd Font Mono:style=medium:pixelsize=17;3"
font-7 = "Hack Nerd Font Mono:size=8;3"

[bar/parrot]
inherit = bar/main
width = 10%
height = 2.5%
offset-x = 0.9%
offset-y = 0.6%
background = "#A6000000"
foreground = ${color.white}
bottom = false
padding = 0
module-margin-left = 0
module-margin-right = 0
modules-center = parrot
wm-restack = bspwm

[bar/hackthebox]
inherit = bar/main
width = 10%
height = 2.5%
offset-x = 13%
offset-y = 0.6%
background = "#A6000000"
foreground = ${color.white}
bottom = false
padding = 0
module-margin-left = 0
module-margin-right = 0
modules-center = hackthebox
wm-restack = bspwm

[bar/objetivo]
inherit = bar/main
width = 10%
height = 2.5%
offset-x = 25.2%
offset-y = 0.6%
background = "#A6000000"
foreground = ${color.white}
bottom = false
padding = 0
module-margin-left = 0
module-margin-right = 0
modules-center = objetivo
wm-restack = bspwm

[bar/escritorios]
inherit = bar/main
override-redirect = true
wm-restack = bspwm
width = 20%
height = 2.5%
offset-x = 78.8%
offset-y = 0.6%
bottom = false
padding = 0
module-margin-left = 0
module-margin-right = 0
modules-center = escritorios

[bar/hora]
inherit = bar/main
width = 5.9%
height = 3.5%
offset-x = 0.9%
offset-y = 0.5%
background = "#A6000000"
foreground = ${color.white}
bottom = true
padding = 0
module-margin-left = 0
module-margin-right = 0
modules-center = hora
wm-restack = bspwm

[bar/procesador]
inherit = bar/main
offset-x = 8.2%
offset-y = 0.5%
width = 7.5%
height = 3.5%
bottom = true
padding = 0
module-margin-left = 0
module-margin-right = 0
background = "#A6000000"
foreground = ${color.white}
modules-center = procesador
wm-restack = bspwm

[bar/memoria]
inherit = bar/main
offset-x = 17.5%
offset-y = 0.5%
width = 10%
height = 3.5%
bottom = true
padding = 0
module-margin-left = 0
module-margin-right = 0
background = "#A6000000"
foreground = ${color.white}
modules-center = memoria
wm-restack = bspwm

[bar/spotify]
inherit = bar/main
enable-ipc = true
font-1 = Font Awesome 5 Free:size=10;1
offset-x = 35.65%
offset-y = 0.5%
width = 28%
height = 3.5%
bottom = true
padding = 0
module-margin-left = 0
module-margin-right = 0
background = "#A6000000"
foreground = ${color.white}
modules-center = iconospotify spotify
wm-restack = bspwm

[bar/controlspotify]
inherit = bar/main
enable-ipc = true
font-1 = Font ack 5 Free:size=10;1
offset-x = 65.9%offset-y = 0.5%
offset-y = 0.5%
width = 25.0%
height = 3.5%
bottom = true
padding = 0
module-margin-left = 0
module-margin-right = 0
background = "#A6000000"
foreground = ${color.white}
modules-center = previous playpause next
wm-restack = bspwm

[bar/volumen]
inherit = bar/main
offset-x = 93.2%
offset-y = 0.5%
width = 5.8%
height = 3.5%
bottom = true
padding = 0
module-margin-left = 0
module-margin-right = 0
background = "#A6000000"
foreground = ${color.white}
modules-center = volumen
wm-restack = bspwm

[module/parrot]
type = custom/script
label-font = 4%
interval = 2
format-prefix = " "
format-prefix-foreground = "#00BFFF"
exec = ~/.config/bin/ethernet_status.sh

[module/hackthebox]
type = custom/script
label-font = 4%
format-prefix = " "
format-prefix-foreground = "#00FF42"
interval = 2
exec = ~/.config/bin/hackthebox_status.sh

[module/objetivo]
type = custom/script
label-font = 4%
format-prefix = "什"
format-prefix-foreground = "#FE2E2E"
interval = 2
exec = ~/.config/bin/settarget.sh

[module/escritorios]
type = internal/xworkspaces
pin-workspaces = false
enable-click = true
enable-scroll = true
format-font = 1
format = <label-state>
format-padding = "0"
icon-default = "  "
label-active = "  "
label-active-foreground = "#2efe64"
label-active-background = "#A6000000"
label-occupied = "  "
label-occupied-foreground = "#B32efe64"
label-occupied-background = "#A6000000"
label-urgent = "  "
label-urgent-foreground = "#000000"
label-urgent-background = "#A6000000"
label-empty = "  "
label-empty-foreground = "#FFFFFF"
label-empty-background = "#A6000000"


[module/hora]
type = internal/date
interval = 1.0
time = %k : %M
date = %b %e
format = <label>
format-prefix = " "
format-prefix-foreground = "#00BFFF"
format-foreground = ${color.white}
label =%time%
label-font = 4%

[module/procesador]
type = internal/cpu
label-font = 4%
format = <label>
format-prefix-foreground = "#00FF42"
format-prefix = " "
interval = 0.5
label = CPU %percentage%%

[module/memoria]
type = internal/memory
label-font = 4%
format = <label>
format-prefix = "﬙ "
format-prefix-foreground = "#00FF42"
label = RAM %mb_used%

[module/iconospotify]
type = custom/text
content-foreground = "#00FF42"
content = "阮 "

[module/spotify]
type = custom/ipc
format-font = 2
hook-0 = echo "Spotify"
hook-1 = spotifyctl -q status --format '%artist%: %title%'

[module/previous]
type = custom/ipc
format-font = 2
hook-0 = echo "玲 "
hook-1 = echo "玲 "
click-left = "spotifyctl -q previous"

[module/playpause]
type = custom/ipc
format-font = 2
hook-0 = echo "  契  "
hook-1 = echo "    "
hook-2 = echo "  契  "
click-left = "spotifyctl -q playpause"

[module/next]
type = custom/ipc
format-font = 2
hook-0 = echo " 怜"
hook-1 = echo " 怜"
click-left = "spotifyctl -q next"

[module/volumen]
type = internal/pulseaudio
sink = alsa_output.pci-0000_12_00.3.analog-stereo
use-ui-max = true
interval = 5
format-volume = <ramp-volume> <label-volume>
label-muted = Muted
label-muted-font = 4%
label-volume-font = 4%
rmap-volume-font = 4%
ramp-volume-0 = 
ramp-volume-1 = 
ramp-volume-2 = 
click-right = pavucontrol

```
### El siguiente script es `hackthebox.sh` lo remplazamos con el del mismo nombre en la ruta `~/.config/polyvar/scripts/`.

```
#!/bin/sh

IFACE=$(/usr/sbin/ifconfig | grep tun0 | awk '{print $1}' | tr -d ':')

if [ "$IFACE" = "tun0" ]; then
        echo "%{F#2EFE64}%{F#FFFFFF}$(/usr/sbin/ifconfig tun0 | grep "inet " | awk '{print $2}')%{u-}"
else
        echo "%{F#2efe64}%{u-}%{F#FFFFFF}Desconectado"
fi
```
### El siguiente script es `parrot.sh` lo remplazamos con el del mismo nombre en la ruta `~/.config/polyvar/scripts/`.

```
#!/bin/sh

echo "%{F#00BFFF}%{F#FFFFFF}$(/usr/sbin/ifconfig ens33 | grep "inet " | awk '{print $2}')%{u-}"

```
### El siguiente script es `objetivo.sh` lo remplazamos con el del mismo nombre en la ruta `~/.config/polyvar/scripts/`.

```
#!/bin/bash

ip_address=$(cat ~/.config/polybar/scripts/machine | awk '{print $1}')
machine_name=$(cat ~/.config//polybar/scripts/machine | awk '{print $2}')

if [ $ip_address ] && [ $machine_name ]; then
    echo "${F#FE2E2E}%{F#FFFFFF}$ip_address%{u-} - $machine_name"
else
    echo "${F#E73D3D}%{u-}%{F#ffffff}Máquina Desconectada"
fi
```



## Instalamos la powerlevel10k en zsh

```default
git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ~/powerlevel10k

echo 'source ~/powerlevel10k/powerlevel10k.zsh-theme' >>~/.zshrc
```
Esto se debe hacer para root asi que para el otro usuario y para cofigurarlo escribimos en la terminal `zsh`.
{:.note title="Attention"}


### Creamos enlace simbólico de la zshrc para root

```default
ln -s -f /home/axel/.zshrc /root/.zshrc
```
Esto se debe hacer para que la  configuracion de .zshrc de root y el otro usuario sea iguales.
{:.note title="Attention"}

### Reemplazamos .zshrc este script con el mismo nombre de `.zshrc` en ala ruta `~/.zshrc`.

```default
# Fix the Java Problem
export _JAVA_AWT_WM_NONREPARENTING=1

# Enable Powerlevel10k instant prompt. Should stay at the top of ~/.zshrc.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# Set up the prompt

autoload -Uz promptinit
promptinit
prompt adam1

setopt histignorealldups sharehistory

# Use emacs keybindings even if our EDITOR is set to vi
bindkey -e

# Keep 1000 lines of history within the shell and save it to ~/.zsh_history:
HISTSIZE=1000
SAVEHIST=1000
HISTFILE=~/.zsh_history

# Use modern completion system
autoload -Uz compinit
compinit

zstyle ':completion:*' auto-description 'specify: %d'
zstyle ':completion:*' completer _expand _complete _correct _approximate
zstyle ':completion:*' format 'Completing %d'
zstyle ':completion:*' group-name ''
zstyle ':completion:*' menu select=2
eval "$(dircolors -b)"
zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}
zstyle ':completion:*' list-colors ''
zstyle ':completion:*' list-prompt %SAt %p: Hit TAB for more, or the character to insert%s
zstyle ':completion:*' matcher-list '' 'm:{a-z}={A-Z}' 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=* l:|=*'
zstyle ':completion:*' menu select=long
zstyle ':completion:*' select-prompt %SScrolling active: current selection at %p%s
zstyle ':completion:*' use-compctl false
zstyle ':completion:*' verbose true

zstyle ':completion:*:*:kill:*:processes' list-colors '=(#b) #([0-9]#)*=0=01;31'
zstyle ':completion:*:kill:*' command 'ps -u $USER -o pid,%cpu,tty,cputime,cmd'


# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ -f ~/.p10k.zsh ]] && source ~/.p10k.zsh

# Manual configuration

PATH=/root/.local/bin:/snap/bin:/usr/sandbox/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/usr/share/games:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games

# Manual aliases
alias ll='lsd -lh --group-dirs=first'
alias la='lsd -a --group-dirs=first'
alias l='lsd --group-dirs=first'
alias lla='lsd -lha --group-dirs=first'
alias ls='lsd --group-dirs=first'
alias cat='bat'
alias vi='nvim'
alias vim='nvim'
alias vin='nvin'
alias htb=''

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# Plugins
source /usr/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source /usr/share/zsh-autosuggestions/zsh-autosuggestions.zsh
source /usr/share/zsh-sudo/sudo.plugin.zsh

# Functions
function mkt(){
        mkdir {nmap,content,exploits}
}

# Extract nmap information
function extractPorts(){
        ports="$(cat $1 | grep -oP '\d{1,5}/open' | awk '{print $1}' FS='/' | xargs | tr ' ' ',')"
        ip_address="$(cat $1 | grep -oP '\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}' | sort -u | head -n 1)"
        echo -e "\n[*] Extracting information...\n" > extractPorts.tmp
        echo -e "\t[*] IP Address: $ip_address"  >> extractPorts.tmp
        echo -e "\t[*] Open ports: $ports\n"  >> extractPorts.tmp
        echo $ports | tr -d '\n' | xclip -sel clip
        echo -e "[*] Ports copied to clipboard\n"  >> extractPorts.tmp
        cat extractPorts.tmp; rm extractPorts.tmp
}

# Set 'man' colors
function man() {
    env \
    LESS_TERMCAP_mb=$'\e[01;31m' \
    LESS_TERMCAP_md=$'\e[01;31m' \
    LESS_TERMCAP_me=$'\e[0m' \
    LESS_TERMCAP_se=$'\e[0m' \
    LESS_TERMCAP_so=$'\e[01;44;33m' \
    LESS_TERMCAP_ue=$'\e[0m' \
    LESS_TERMCAP_us=$'\e[01;32m' \
    man "$@"
}

# fzf improvement
function fzf-lovely(){

        if [ "$1" = "h" ]; then
                fzf -m --reverse --preview-window down:20 --preview '[[ $(file --mime {}) =~ binary ]] &&
                        echo {} is a binary file ||
                         (bat --style=numbers --color=always {} ||
                          highlight -O ansi -l {} ||
                          coderay {} ||
                          rougify {} ||
                          cat {}) 2> /dev/null | head -500'

        else
                fzf -m --preview '[[ $(file --mime {}) =~ binary ]] &&
                                 echo {} is a binary file ||
                                 (bat --style=numbers --color=always {} ||
                                  highlight -O ansi -l {} ||
                                  coderay {} ||
                                  rougify {} ||
				  cat {}) 2> /dev/null | head -500'
        fi
}

function settarget {
	target=$1
	#name=$2
	echo "$target" > /home/axel/.config/bin/target
	#echo "$target" > /home/axel/.config/bin/name
}

function cleantarget {
	target=$1
	#name=$2
	echo "No target" > /home/axel/.config/bin/target
	#echo 'No name' > /home/axel/.config/bin/name
}

function rmk(){
        scrub -p dod $1
        shred -zun 10 -v $1
}

# Finalize Powerlevel10k instant prompt. Should stay at the bottom of ~/.zshrc.
(( ! ${+functions[p10k-instant-prompt-finalize]} )) || p10k-instant-prompt-finalize
source ~/powerlevel10k/powerlevel10k.zsh-theme

bindkey "^[[H" beginning-of-line
bindkey "^[[F" end-of-line
bindkey "^[[3~" delete-char
bindkey "^[[1;3C" fordward-word
bindkey "^[[1;3D" backward-word

source ~/powerlevel10k/powerlevel10k.zsh-theme

```
Hay que cambiar mi usuario es decir `axel` por el usuario que corresponda a tu ruta.
{:.note title="Attention"}


## Cambiamos el tipo de shell por defecto tanto para root como para el usuario con bajos privilegios


```bash
usermod --shell /usr/bin/zsh /home/axel

```
Hay que cambiar mi usuario es decir `axel` por el usuario que corresponda a tu ruta.
{:.note title="Attention"}

```bash
usermod --shell /usr/bin/zsh /root

```

## Retocamos el archivo .p10k.zsh para adecuarlo a nuestro gusto

Para evitar un pequeño problema de permisos a la hora de desde el usuario root migrar con 'su' al usuario con bajos privilegios, ejecutamos los siguientes comandos:
```bash
chown axel:axel /root

```
```bash
chown axel:axel /root/.cache -R

```
```bash
chown axel:axel /root/.local -R

```

## Instalamos bat, lsd, fzf y ranger

```bash
sudo apt install bat -y

```
```bash
sudo apt install lsd -y
```
```bash
sudo apt install fzf -y

```
```bash
sudo apt install ranger -y

```

![list](/assets/img/entorno/Kali-2022-09-11-15-22-09.png){:.lead width="800" height="100" loading="lazy"}
![list](/assets/img/entorno/Kali-2022-09-11-15-23-25.png){:.lead width="800" height="100" loading="lazy"}
![list](/assets/img/entorno/Kali-2022-09-11-15-23-56.png){:.lead width="800" height="100" loading="lazy"}



```shell
🎉 Felicitaciones ya tienes tu propio Entorno! 🎉
```
{:.centered}

***